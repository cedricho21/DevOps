# Simple Docker
## Part 1. Готовый докер

* Взяли официальный докер-образ с nginx и выкачали его при помощи **docker pull**.
![](images/1.1.png)

* Проверили наличие докер-образа через **docker images**.
![](images/1.2.png)

* Запустили докер-образ через **docker run -d nginx**
![](images/1.3.png)

* Проверили, что образ запустился через **docker ps**.
![](images/1.4.png)

* Посмотрели информацию о контейнере через **docker inspect 7b982c5fc45f**. По выводу команды определили и поместили в отчёт размер контейнера, список замапленных портов и ip контейнера.
![](images/1.5.png)

* Остановили докер образ через **docker stop 7b982c5fc45f**.
![](images/1.6.png)

* Проверели, что образ остановился через **docker ps**.
![](images/1.7.png)

* Запустили докер с портами 80 и 443 в контейнере, замапленными на такие же порты на локальной машине, через команду **run**.
![](images/1.8.png)

* Проверили, что в браузере по адресу localhost:80 доступна стартовая страница nginx.
![](images/1.9.png)

* Перезапустили докер контейнер через **docker restart 7189e9af3de4**. Проверили, что контейнер запустился.
![](images/1.10.png)
-----

## Part 2. Операции с контейнером

* Прочитали конфигурационный файл nginx.conf внутри докер контейнера через команду exec. Создали на локальной машине файл nginx.conf
![](images/2.1.png)

* Настроили в нем по пути /status отдачу страницы статуса сервера nginx.
![](images/2.2.png)

* Скопировали созданный файл nginx.conf внутрь докер-образа через команду **docker cp**. Перезапустили nginx внутри докер-образа через команду exec. Проверили, что по адресу localhost:80/status отдается страничка со статусом сервера nginx.
![](images/2.3.png)

* Экспортировали контейнер в файл container.tar через команду export.
![](images/2.4.png)

* Остановили контейнер.
![](images/2.5.png)

* Удалили образ через **docker rmi** b690f5f0a2d5, не удаляя перед этим контейнеры.
![](images/2.6.png)

* Удалили остановленный контейнер.
![](images/2.7.png)

* Импортировали контейнер обратно через команду import. Запустили импортированный контейнер. Проверили, что по адресу localhost:80/status отдается страничка со статусом сервера nginx.
![](images/2.8.png)

## Part 3. Мини веб-сервер

* Написали мини-сервер на C и FastCgi, который будет возвращать простейшую страничку с надписью ***Hello World!***.
![](images/3.1.png)

* Запустили написанный мини-сервер через spawn-fcgi на порту 8080.
![](images/3.2.png)

* Написали свой nginx.conf, который будет проксировать все запросы с 81 порта на 127.0.0.1:8080.
![](images/3.3.png)

* Проверили, что в браузере по localhost:81 отдается написанная тобой страничка.
![](images/3.4.png)

# Part 4. Свой докер

* Собрали написанный докер-образ через docker build при этом указав имя и тег.
![](images/4.1.png)
![](images/4.2.png)

* Проверили через docker images, что все собралось корректно.
![](images/4.3.png)

* Запустли собранный докер-образ с маппингом 81 порта на 80 на локальной машине и маппингом папки ./nginx внутрь контейнера по адресу, где лежат конфигурационные файлы nginx'а. Проверили, что по localhost:80 доступна страничка написанного мини сервера.
![](images/4.4.png)

* Дописали в ./nginx/nginx.conf проксирование странички /status, по которой надо отдавать статус сервера nginx.
![](images/4.5.png)

* Перезапустили докер-образ. Проверили, что теперь по localhost:80/status отдается страничка со статусом nginx.
![](images/4.6.png)

# Part 5. Dockle

* Просканировали образ из предыдущего задания через ***dockle [image_id|repository]***.
![](images/5.1.png)

* Исправили образ так, чтобы при проверке через dockle не было ошибок и предупреждений.
![](images/5.2.png)
![](images/5.3.png)

# Part 6. Базовый Docker Compose

* Написали файл docker-compose.yml, с помощью которого подняли докер-контейнер из Части 5, а также подняли докер-контейнер с nginx, который будет проксировать все запросы с 8080 порта на 81 порт первого контейнера. Замапили 8080 порт второго контейнера на 80 порт локальной машины.
![](images/6.1.png)

* Остановили все запущенные контейнеры.
![](images/6.2.png)

* Собрали и запустили проект с помощью команд ***docker-compose build*** и ***docker-compose up***.
![](images/6.3.png)

* Проверили, что в браузере по localhost:80 отдается написанная тобой страничка, как и ранее.
![](images/6.4.png)
